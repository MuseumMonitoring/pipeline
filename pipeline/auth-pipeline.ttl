@prefix owl: <http://www.w3.org/2002/07/owl#>.
@prefix rdfl: <https://w3id.org/rdf-lens/ontology#>.
@prefix rdfc: <https://w3id.org/rdf-connect#>.

<> owl:imports <../node_modules/@rdfc/js-runner/index.ttl>.
<> owl:imports <../proc/acl_auth.ttl>.
<> owl:imports <../proc/css.ttl>.
<> owl:imports <../proc/webIdBuilder.ttl>.
<> a rdfc:Pipeline;
  rdfc:consistsOf [
    rdfc:instantiates rdfc:NodeRunner;
    rdfc:processor <css>, <auth>, <builder>;
  ].

<auth> a rdfc:AclAuth;
  rdfc:usersUrl [
    a rdfl:EnvVariable;
    rdfl:envDefault "http://localhost:8080/history.php?users";
    rdfl:envKey "userHistory";
  ];
  rdfc:groupsUrl [
    a rdfl:EnvVariable;
    rdfl:envDefault "http://localhost:8080/history.php?groups";
    rdfl:envKey "groupHistory";
  ];
  rdfc:port 7111;
  rdfc:interval 5000;
  rdfc:publicGroup 1, 5, 7;
  rdfc:protected "/data/location", "/data/by-sensor";
  rdfc:public "/data/location/.acl",
    "/data/by-sensor/.acl",
    "/data/location/root/.acl",
    "/data/by-sensor/root/.acl".

<css> a rdfc:Css;
  rdfc:config <./css_config.json>;
  rdfc:baseUrl "http://api.local/";
  rdfc:baseUrl "http://localhost:3000/";
  rdfc:path <./ldes/>;
  rdfc:mainModulePath <../>.

<builder> a rdfc:WebIdBuilder;
  rdfc:accountRoot "http://api.local/.account/";
  rdfc:oidcEndpoint "http://api.local/.oidc/token";
  rdfc:port 3002;
  rdfc:timeout 5000.

